---
title: "从零开始一步一步制作自己的工具、构建现代计算机系统 - 目录"
date: 2022-11-01
tags: ["riscv"]
categories: ["craft-system"]
draft: true
---

这是 _从零开始一步一步制作自己的工具、构建现代计算机系统_ 项目的总目录。

上一篇 [简介](../2022-10-31-building-a-modern-computer-system-from-scratch-step-by-step) 提到，该项目由四个系列的文章组成，每个系列包含若干部。下面列出每一部的标题以及文章的链接，当有新文章时，这个目录也会同时更新。

## 系列 1: 一步一步深入 RISC-V 系统

- 第一部：了解编译器、链接器、调试器以及一些常用二进制工具的使用方法，了解程序的组成，构建最小独立式可执行程序（freestanding，也叫 _裸机程序_）等；

  - [S01C01 什么是交叉编译？GCC 交叉编译及运行第一个程序](../2022-11-05-s01c01-cross-compile-and-run-the-first-program)
  - [S01C02 编写一个无需操作系统，可独自运行的 Hello World 程序](../2022-11-06-s01c02-write-a-bare-metal-program-run-alone-without-os)
  - [S01C03 揭秘 ELF 可执行文件，制作一个只有 70 字节的最小 Hello World 程序](../2022-11-07-s01c03-the-program-file-structure-and-make-a-minimal-hello-world-program)

- 第二部：通过微控制器（MCU）来简单地了解软件和硬件之间的交互原理，通过不使用 SDK 或者硬件抽象库（HAL），而是直接读写寄存器的方式编写裸机程序（固件），控制电信号的输入输出（GPIO），实现串口通信等；
- 第三部：了解现代系统的程序加载、动态链接的原理，了解 RISC-V 的函数调用规程以及基本指令，使用汇编语言编写简单的程序；
- 第四部：设计一门目标架构为 RISC-V 的汇编语言，实现其汇编器，同时了解简单的语法解析器的原理；
- 第五部：设计一门链接脚本语言，实现其链接器，同时了解脚本解析器的原理。

> 很多人都看过 [_曼德博集合_](https://en.wikipedia.org/wiki/Mandelbrot_set)（Mandelbrot set）的[分形图形](https://en.wikipedia.org/wiki/Fractal)，这种图形可以无限地放大和移动，而且总会有千变万化而美丽的图形产生。我们可以像浏览我们宇宙的星系一样，即使花上一整天的时间来遨游也不会觉得枯燥。但让人难以置信的是，这个无比庞大且复杂的宇宙其实只是一条简单的数学函数产生的：$y = x^2 + z$，只需把 $y$ 的值不断代入 $x$，大爆炸就产生了。第一个系列正属于类似的内容，它用于拔开那些让人眼花缭乱的表层技术，让我们了解计算机系统最底层最简单的原理。

## 系列 2: 一步一步实现一门现代语言及其编译器

- 第一部：设计一门中间语言（IR），实现从中间语言到汇编语言的代码生成器（code generator）；
- 第二部：设计一门现代的静态类型的语言，实现高级语言到中间语言的代码生成器，至此完成了一个 _简单的完整的编译系统_；
- 第三部：实现 [WASM](https://webassembly.org/) 虚拟机（VM），然后实现中间语言到 WASM 的代码生成器。实现 WASM VM 的同时可以大致地认识一个处理器是如何工作的，另一方面有了 WASM 代码生成器，意味着我们的语言能在浏览器中运行；
- 第四部：实现中间语言到 ARM 和 RISC-V 汇编的生成器。
- 第五部：实现中间语言到 [LLVM IR](https://llvm.org/docs/LangRef.html) 的代码生成器。
- 第六部：实现项目构建器及包管理器。

![compilation system](images/compilation-system.png)

## 系列 3: 一步一步实现一个实用型的 RISC-V CPU

- 第一部：设计一个最小的指令集，实现数字累加和内存加载和存储功能；然后通过数字电路仿真软件实现一个最简处理器，该处理器包含了 ROM、RAM、寄存器堆（register file）、译码器、控制器及算术逻辑单元（ALU）等基本处理器要素，能执行我们的指令集。通过这一部来了解处理器的基本运作原理，以及软件如何变成电信号。
- 第二部：从我们的语言派生出一门 HDL 语言，实现该门语言的数字逻辑电路模拟器以及测试（验证）框架；实现从这门语言到 [SystemVerilog](https://en.wikipedia.org/wiki/SystemVerilog) 的代码生成器，然后用这门语言重新实现上一部的基础组件以及处理器，并下载到 FPGA 硬件上通电测试；
- 第三部：使用自己的 HDL 语言实现一个多时钟周期的 RV64I 处理器，并下载到 FPGA 硬件上通电测试；
- 第四部：实现常见的通信协议（比如 UART、$I^2C$、SPI），书写常见的外设（比如 GPIO 接口、SPI Flash、SD 卡、SSD 1306 显示屏等）的驱动。整合我们的处理器，实现一个完整的硬件系统；
- 第五部：将处理器微架构升级为多级流水线设计。

## 系列 4: 一步一步实现一个实用的微内核操作系统

- 第一部：为处理器添加内存管理单元（MMU）以及特权相关的模块；
- 第二部：实现最小的内核，即实现基本的串口输入输出，多级页表内存管理，程序的加载及进程的简单切换，以及消息机制等；
- 第三部：实现一个简单的文件系统；
- 第四部：实现简单的用户交互界面（shell）；
- 第五部：实现简单的网络接口；
- 第六部：实现一个包管理器；
- 第七部：为处理器添加浮点运算模块，以及一个矩阵计算协处理器（coprocessor）；
- 第八部：实现一个简单的机器学习库，实现手写数字识别程序；
- 第九部：实现一个简单的图形加速协处理器；
- 第十部：实现一个简单的图形库，一个简单的物理引擎，实现一个复古风格的横向卷轴动作游戏。

{{< rawhtml >}}
<div>
    <img src="/images/subscribe-and-donate.zh.png" class="block-image image-480px"/>
</div>
{{< /rawhtml >}}