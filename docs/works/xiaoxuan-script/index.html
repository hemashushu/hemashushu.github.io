<!doctype html>

<html lang="en">

<head>
  <title>XiaoXuan Script - Hemashushu&#39;s Homepage</title>
  <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="Hemashushu&#39;s homepage, sharing some computer technology, programming skills, learning notes, some home-brew softwares and hardwares" />
<meta name="author" content="hemashushu" /><meta property="og:title" content="XiaoXuan Script" />
<meta property="og:description" content="The XiaoXuan Script Programming Language is suitable for building high-performance, solid web applications. It can be compiled to WebAssembly on-the-fly without the need for any build tools. It is intended to be the next preferred programming language for web development.
How does it work? Only 3 files are needed to give browsers the ability to develop web applications using a new language (the XiaoXuan Script):
ans_compiler.wasm, the compiler for XiaoXuan Script." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hemashushu.github.io/works/xiaoxuan-script/" /><meta property="article:section" content="works" />
<meta property="article:published_time" content="2024-01-19T00:00:00+00:00" />
<meta property="article:modified_time" content="2024-01-19T00:00:00+00:00" />


<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="XiaoXuan Script"/>
<meta name="twitter:description" content="The XiaoXuan Script Programming Language is suitable for building high-performance, solid web applications. It can be compiled to WebAssembly on-the-fly without the need for any build tools. It is intended to be the next preferred programming language for web development.
How does it work? Only 3 files are needed to give browsers the ability to develop web applications using a new language (the XiaoXuan Script):
ans_compiler.wasm, the compiler for XiaoXuan Script."/>

<meta name="generator" content="Hugo 0.122.0">
    
    <script src="/js/mathjax-config.js" defer></script>
    
    
    <script src="/js/polyfill.min.js"></script>
    <script id="MathJax-script" async src="/js/tex-mml-chtml.js"></script>

  
  <link rel="stylesheet" href="/css/normalize.min.css" />
  <link rel="stylesheet" href="https://hemashushu.github.io/fontawesome/css/all.min.css" />
  

  
  
  <link rel="stylesheet" type="text/css" href="/css/styles.css" /><link rel='stylesheet' href='https://hemashushu.github.io/css/custom.css'></head>

<body>
  <header>
    
    <div id="content">
      <ul id="social-media">
        
                <li>
                <a href="https://github.com/hemashushu" title="GitHub">
                <i class="fab fa-github fa-lg"></i>
                </a>
                </li>
                <li>
                <a href="https://twitter.com/hemashushu" title="Twitter">
                <i class="fab fa-twitter fa-lg"></i>
                </a>
                </li>
                <li>
                <a href="https://www.youtube.com/@hemashushu" title="Youtube">
                <i class="fab fa-youtube fa-lg"></i>
                </a>
                </li>
      </ul>

      
      <h1>
      <a href="/">Hemashushu&rsquo;s Homepage</a>
      </h1>

      
      <p><em>Curiosity, exploration and creation</em></p>
      
    </div>
  </header>
  <div id="container">


    
<nav>
    <ul>
        <li>
            <a href="/" title="Home">Home</a>
        </li>
        
        <li>
            <a class="active" href="/works/">
                <i class="fa-li fa  fa-lg"></i><span>Works</span>
            </a>
        </li>
        
        <li>
            <a class="" href="/posts/">
                <i class="fa-li fa  fa-lg"></i><span>Posts</span>
            </a>
        </li>
        
        <li>
            <a class="" href="/about/">
                <i class="fa-li fa  fa-lg"></i><span>About</span>
            </a>
        </li>
        
    </ul>
</nav>


    <main>




<article>

    <h1>XiaoXuan Script</h1>

    
      <aside>
    <ul>
        <li>
            <time class="post-date" datetime="2024-01-19T00:00:00Z">Jan 19, 2024</time>
        </li>
        

        
        <li>
            Categories:
            <em>
                
                    
                    <a href="/categories/xiaoxuan-script">xiaoxuan-script</a>
                
            </em>
        </li>
        

        
        <li>
            <em>
                
                    
                    <a href="/tags/xiaoxuan-script">#xiaoxuan-script</a>
                
                    , 
                    <a href="/tags/xiaoxuan-lang">#xiaoxuan-lang</a>
                
            </em>
        </li>
        

        <li>5 minute read</li>
    </ul>
</aside>

    

    
      

    

    <figure class="wide"><img src="./images/banner.png"/>
</figure>

<p>The <em>XiaoXuan Script Programming Language</em> is suitable for building high-performance, solid web applications. It can be compiled to WebAssembly on-the-fly without the need for any build tools. It is intended to be the next preferred programming language for web development.</p>
<h2 id="how-does-it-work">How does it work?</h2>
<p>Only 3 files are needed to give browsers the ability to develop web applications using a new language (the XiaoXuan Script):</p>
<ul>
<li><code>ans_compiler.wasm</code>, the compiler for XiaoXuan Script.</li>
<li><code>ans_loader.js</code>, the loader for the compiler, which also serves as the web application manager, as well as the bridge between the WebAssembly and the Web API.</li>
<li><code>ans_std.ans</code>, the source code of the XiaoXuan Script standard library.</li>
</ul>
<figure class="mid white"><img src="./images/compilation.png"
         alt="The Compilation Process"/><figcaption>
            <p>The Compilation Process</p>
        </figcaption>
</figure>

<p>When a user accesses your web application (web page), the <em>compiler</em> will compile all the source code (including the user code, standard library, and all dependencies) on-the-fly into a WebAssembly file, which is then cached in the user&rsquo;s browser to speed up the next load. The web page and WebAssembly will then interoperate via the <em>bridge</em>.</p>
<h2 id="quick-start">Quick start</h2>
<p>Let&rsquo;s create a minimal &ldquo;Hello World!&rdquo; XiaoXuan Script application.</p>
<p>First create a folder named &ldquo;hello-ans&rdquo; in your home directory (or any directory), then download the XiaoXuan Script distribution package <span class="null-link">xiaoxuan_script_dist_1.0.1.tar.gz</span>, which is a compressed file containing <code>ans_compiler.wasm</code>, <code>ans_loader.js</code>, <code>ans_std.ans</code>, and some README etc. files, and then extract it to this folder.</p>
<p>Then create files <em>main.ans</em> and <em>ans_package.json</em> in this folder.</p>
<p>The file <em>main.ans</em> is the main module of our web application, which should contain the <code>main</code> function. The file content is as follows:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">title</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&#34;#title&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">set</span><span class="p">(</span><span class="nx">title</span><span class="p">.</span><span class="nx">textContent</span><span class="p">,</span> <span class="s2">&#34;Hello World!&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">btn</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&#34;#like&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">btn</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;click&#34;</span><span class="p">,</span> <span class="nx">like</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">like</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">count</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&#34;#count&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">number</span><span class="o">:</span><span class="kr">int</span> <span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">count</span><span class="p">.</span><span class="nx">textContent</span><span class="p">).</span><span class="nx">parse</span><span class="p">().</span><span class="nx">unwrap</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">set</span><span class="p">(</span><span class="nx">count</span><span class="p">.</span><span class="nx">textContent</span><span class="p">,</span> <span class="p">(</span><span class="nx">number</span><span class="o">+</span><span class="mi">1</span><span class="p">).</span><span class="nx">to_string</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>You may have noticed that the above code looks similar to the JavaScript, this is the design of XiaoXuan Script, where the names of objects and functions are kept as close as possible to JavaScript, the similarity to an existing language reduces the difficulty of learning a new language.</p>
<p>The file <em>ans_package.json</em> is the package description file, which contains information about the package name, version, compiler version, list of source files, and dependencies. <em>ans_package.json</em> has the following contents:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;hello_ans&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;compiler&#34;</span><span class="p">:</span> <span class="s2">&#34;1.0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;modules&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;main&#34;</span><span class="p">:</span> <span class="s2">&#34;./main.ans&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Next, create the web page file <em>index.html</em>, the content is as follows:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Hello, XiaoXuan Script<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;module&#34;</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;./ans_loader.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;title&#34;</span><span class="p">&gt;</span>title<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;button&#34;</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;like&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;+1&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;count&#34;</span><span class="p">&gt;</span>0<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span></code></pre></div><p>The content of <em>index.html</em> is quite simple, the key line is: <code>&lt;script type=&quot;module&quot; src=&quot;./ans_loader.js&quot;&gt;&lt;/script&gt;</code>, it loads the <em>XiaoXuan Script Loader</em> and the loader does all the rest.</p>
<p>The structure of the folder &ldquo;hello-ans&rdquo; should look like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">hello_ans
</span></span><span class="line"><span class="cl">├── ans_compiler.wasm
</span></span><span class="line"><span class="cl">├── ans_loader.js
</span></span><span class="line"><span class="cl">├── ans_module.json
</span></span><span class="line"><span class="cl">├── ans_std.ans
</span></span><span class="line"><span class="cl">├── index.html
</span></span><span class="line"><span class="cl">└── main.ans
</span></span></code></pre></div><p>Finally, let&rsquo;s create a local HTTP server, which can be done by running the command <code>python -m http.server</code>.</p>
<p>Now open any browser and visit <code>http://localhost:8000/</code>. You should see the text &ldquo;Hello World!&rdquo; and the number will increase when you click on the &ldquo;Like&rdquo; button.</p>
<h2 id="q--a">Q &amp; A</h2>
<h3 id="what-are-the-differences-between-_javascript_-and-_xiaoxuan-script_">What are the differences between <em>JavaScript</em> and <em>XiaoXuan Script</em>?</h3>
<p><em>JavaScript</em> is the default programming language supported by browsers. It is easy to learn and use, and its syntax is flexible. Compared to <em>JavaScript</em>, <em>XiaoXuan Script</em> has the following advantages:</p>
<ul>
<li>
<p>It has a stricter syntax and is a statically, strongly typed compiled programming language, it is more suitable for developing large-scale applications. It can significantly reduce coordination costs between team members in team development, and is also easier to maintain the application source code.</p>
</li>
<li>
<p>It is compiled to WebAssembly before running, and WebAssembly is widely considered to have higher performance than <em>JavaScript</em>. Therefore, <em>XiaoXuan Script</em> has better performance in computationally intensive scenarios (such as data processing, audio or image processing).</p>
</li>
</ul>
<h3 id="what-are-the-differences-between-_typescript_-and-_xiaoxuan-script_">What are the differences between <em>TypeScript</em> and <em>XiaoXuan Script</em>?</h3>
<p><em>XiaoXuan Script</em> has some syntactic similarities to TypeScript. If you are familiar with TypeScript, it means that you can easily learn <em>XiaoXuan Script</em>. The difference is that <em>TypeScript</em> is compiled to <em>JavaScript</em>, while <em>XiaoXuan Script</em> is compiled to WebAssembly, which means that <em>XiaoXuan Script</em> will have better performance.</p>
<h3 id="rustcc-can-also-be-compiled-to-webassembly-so-what-are-the-differences-between-_xiaoxuan-script_-and-them">Rust/C/C++ can also be compiled to WebAssembly, so what are the differences between <em>XiaoXuan Script</em> and them?</h3>
<p>Rust/C/C++ are mainly used to build parts of a web application, such as data processing libraries, rather than building the entire web application. On the other hand, <em>XiaoXuan Script</em> is used to build the entire application. Using <em>XiaoXuan Script</em> means that you only need to learn one language to  develop a variety of applications, which reduces the learning burden on developers.</p>
<h3 id="why-on-the-fly-compilation">Why on-the-fly compilation?</h3>
<p><em>XiaoXuan Script</em> actually supports pre-compilation mode, which is recommended for large-scale web applications that have a large amount of source code and dependencies.</p>
<p>However, for most web applications, the code may not so large, and on-the-fly compilation mode is more convenient. It can simplify the developer&rsquo;s workflow, you can write, debug and run your code like you do with <em>JavaScript</em>, without the need for any build tools. In addition, XiaoXuan Script has a very fast compilation speed, and users can hardly notice the compilation process when they access your web application.</p>
<h2 id="get-started">Get started</h2>
<ul>
<li><span class="null-link">XiaoXuan Script Playground</span></li>
<li><span class="null-link">Get started with XiaoXuan Script in 5 minutes</span></li>
</ul>
<h2 id="manuals--tutorials">Manuals &amp; Tutorials</h2>
<ul>
<li><span class="null-link">Build a local TODO web application using XiaoXuan Script</span></li>
</ul>


</article>


<section class="post-nav">
    <ul>
        <li>
        
            <a href="https://hemashushu.github.io/works/xiaoyu-debugger/"><i class="fa fa-chevron-circle-left"></i> XiaoYu Debugger</a>
        
        </li>
        <li>
        
            <a href="https://hemashushu.github.io/works/xiaoxuan-native/">XiaoXuan Native <i class="fa fa-chevron-circle-right"></i> </a>
        
        </li>
    </ul>
</section>
  
    
    
  





</main>
    <footer>
        <ul>
            <li>
                <span>Copyright © 2023 - Hippospark Young | 
                    <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh"><img alt="cc by-nc-nd" class="license" src="/images/cc-by-nc-nd.png" /></a> |
                    Rendered by <a href="https://gohugo.io" title="Hugo">Hugo</a> |
                    Theme <a href="https://github.com/hemashushu/hugo-selina" title="Selina">Selina</a> |
                    <a href="https://hemashushu.github.io/index.xml">Subscribe </a></span>
            </li>
            
            
        </ul>
        
    </footer>
</div>
<script src="/js/scripts.js"></script>

  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-J7X4YJHXM9"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-J7X4YJHXM9', { 'anonymize_ip': false });
}
</script>





</body>

</html>

