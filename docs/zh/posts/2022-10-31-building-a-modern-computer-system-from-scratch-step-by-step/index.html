<!doctype html>

<html lang="en-us">

<head>
  <title>从零开始一步一步制作自己的工具、构建现代计算机系统 - 简介 - 河马蜀黍的个人主页</title>
  <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="河马蜀黍的个人主页和博客，分享一些计算机基础知识、编程技术、学习心得，发布一些自己制作的小软件和硬件" />
<meta name="author" content="hemashushu" /><meta property="og:title" content="从零开始一步一步制作自己的工具、构建现代计算机系统 - 简介" />
<meta property="og:description" content="前言 RISC-V 是最近几年热门的计算机指令集，相信已经有不少朋友已经尝试过编译 RISC-V 版的 Linux 内核，或者跟着教程编写 RISC-V 版的玩具操作系统、玩具编程语言和编译器，甚至用 HDL（硬件描述语言）编写自己的玩具 RISC-V CPU。 无论是哪种，刚开始时你肯定既激动又兴奋，就像要在一个异世界开始一段新冒险的勇者那样。不过当你翻到教程的第二章，你可能就开始眉头紧锁，然后咬着牙又翻了几章，经过一番挣扎最后只能放弃。这时候你可能很疑惑：“明明写了几年的程序，各种算法题早已不放在眼里，为什么还是看不懂这些教程呢？！&quot; 显然这是因为缺少对完整的 系统" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hemashushu.github.io/zh/posts/2022-10-31-building-a-modern-computer-system-from-scratch-step-by-step/" /><meta property="og:image" content="https://hemashushu.github.io/posts/2022-10-31-building-a-modern-computer-system-from-scratch-step-by-step/images/mcu.jpg" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-31T14:34:52+08:00" />
<meta property="article:modified_time" content="2022-10-31T14:34:52+08:00" /><meta property="og:site_name" content="河马蜀黍的个人主页" />


<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://hemashushu.github.io/posts/2022-10-31-building-a-modern-computer-system-from-scratch-step-by-step/images/mcu.jpg"/>

<meta name="twitter:title" content="从零开始一步一步制作自己的工具、构建现代计算机系统 - 简介"/>
<meta name="twitter:description" content="前言 RISC-V 是最近几年热门的计算机指令集，相信已经有不少朋友已经尝试过编译 RISC-V 版的 Linux 内核，或者跟着教程编写 RISC-V 版的玩具操作系统、玩具编程语言和编译器，甚至用 HDL（硬件描述语言）编写自己的玩具 RISC-V CPU。 无论是哪种，刚开始时你肯定既激动又兴奋，就像要在一个异世界开始一段新冒险的勇者那样。不过当你翻到教程的第二章，你可能就开始眉头紧锁，然后咬着牙又翻了几章，经过一番挣扎最后只能放弃。这时候你可能很疑惑：“明明写了几年的程序，各种算法题早已不放在眼里，为什么还是看不懂这些教程呢？！&quot; 显然这是因为缺少对完整的 系统"/>

<meta name="generator" content="Hugo 0.102.0-DEV" />
    
    <script src="/js/mathjax-config.js" defer></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://hemashushu.github.io/fontawesome/css/all.min.css" />
  

  
  
  <link rel="stylesheet" type="text/css" href="/css/styles.css" /><link rel='stylesheet' href='https://hemashushu.github.io/css/custom.css'></head>

<body>
  <div id="container">
    <header>
      
      <h1>
        <a href="/zh/">河马蜀黍的个人主页</a>
      </h1>

      <ul id="social-media">
        
        
          <li>
            <a href="https://hemashushu.github.io/posts/2022-10-31-building-a-modern-computer-system-from-scratch-step-by-step/">English</a>
          </li>
        
        
             <li>
               <a href="https://github.com/hemashushu" title="GitHub">
               <i class="fab fa-github fa-lg"></i>
               </a>
             </li>
             <li>
               <a href="https://twitter.com/hemashushu" title="Twitter">
               <i class="fab fa-twitter fa-lg"></i>
               </a>
             </li>
      </ul>
      
      <p><em>好奇、探索、创造</em></p>
      
    </header>

    
<nav>
    <ul>
        
        <li>
            <a class="active" href="/zh/posts/">
                <i class="fa-li fa  fa-lg"></i><span>文章</span>
            </a>
        </li>
        
        <li>
            <a class="" href="/zh/about/">
                <i class="fa-li fa  fa-lg"></i><span>About</span>
            </a>
        </li>
        
    </ul>
</nav>


    <main>




<article>

    <h1>从零开始一步一步制作自己的工具、构建现代计算机系统 - 简介</h1>

    
      <aside>
    <ul>
        <li>
            <time class="post-date" datetime="2022-10-31T14:34:52&#43;08:00">Oct 31, 2022</time>
        </li>
        
        
        <li>
            Categories:
            <em>
                
                    
                    <a href="/zh/categories/craft-system">craft-system</a>
                
            </em>
        </li>
        

        
        <li>
            <em>
                
                    
                    <a href="/zh/tags/riscv">#riscv</a>
                
            </em>
        </li>
        

        <li>8 minute read</li>
    </ul>
</aside>

    

    
      
<div class="featured_image">
    <a href="https://hemashushu.github.io/zh/posts/2022-10-31-building-a-modern-computer-system-from-scratch-step-by-step/" title="从零开始一步一步制作自己的工具、构建现代计算机系统 - 简介">
        <img src="/posts/2022-10-31-building-a-modern-computer-system-from-scratch-step-by-step/images/mcu.jpg">
    </a>
</div>


    

    <h2 id="前言">前言</h2>
<p>RISC-V 是最近几年热门的计算机指令集，相信已经有不少朋友已经尝试过编译 RISC-V 版的 Linux 内核，或者跟着教程编写 RISC-V 版的玩具操作系统、玩具编程语言和编译器，甚至用 HDL（硬件描述语言）编写自己的玩具 RISC-V CPU。</p>
<p>无论是哪种，刚开始时你肯定既激动又兴奋，就像要在一个异世界开始一段新冒险的勇者那样。不过当你翻到教程的第二章，你可能就开始眉头紧锁，然后咬着牙又翻了几章，经过一番挣扎最后只能放弃。这时候你可能很疑惑：“明明写了几年的程序，各种算法题早已不放在眼里，为什么还是看不懂这些教程呢？！&quot;</p>
<p>显然这是因为缺少对完整的 <em>系统技术</em>（有时也叫 <em>计算机基础</em>，<em>底层技术</em> 或者 <em>核心技术</em>，下面统一称为 <em>系统技术</em>）的了解，你可能会反驳：”系统技术嘛，在计算机基础课程里我早就学过了，考试也通过了！“。是的，在计算机专业的课程里都设置有诸如 <em>组成原理</em>、<em>编译原理</em>、<em>操作系统</em> 等课程，还因担心你一下子吸收不了而一门一门地分好几个学期教学。不过<strong>把这些科目分开学习是错误的</strong>，因为系统技术是相互交叉的。</p>
<p><img src="images/path.zh.png" alt="path">
<em>螺旋式的学习路径</em></p>
<p>计算机系统包括了 <em>语言</em>、<em>处理器</em> 和 <em>操作系统</em> 三个基本组成部分。如果从远距离来看，处理器和操作系统会是同一回事，它们共同构建了一种人类历史上最复杂的机器 ———— 计算机。处理器负责实现不变的逻辑运算，而操作系统则是处理器的自然延伸，负责实现需要变化的部分。至于语言则用于表达、封装和抽象机器的功能，使得机器和人类之间的交流成为可能。可见它们是同一个目的 ———— 让机器解决问题的不同侧面，分开学习自然无法理解其中的联系和缘由。不妨把每一个领域想象成一根根立起来的柱子，正确的学习路径是围绕着这些柱子<strong>螺旋式地逐渐地往上爬</strong>，而不是一口气爬完一根柱子，然后滑下来再爬另一根柱子。</p>
<p>其次学习方法也存在问题，系统技术大多是工程师们在不断地解决问题之后得出的经验总结及其知识积累，也就是说，理论并不是起主导作用，更多是通过各种尝试后得出的 <em>最佳实践</em>。因此较好的的学习方法应该是先从探索和尝试开始入手，然后<strong>边实践边试错、边领会边总结</strong>，而不是先学一大堆原理，再做完一堆习题，最后才开始实践。</p>
<p><img src="images/way.zh.png" alt="way"></p>
<p>总的来说，虽然我们几乎都学过跟系统技术相关的科目，但因为我们的学习过程跟系统的构建方式和过程都相差甚远，所以实际上并没有真正掌握到这些技术。不妨试试在没有网络的帮助下，看看能否自己设计一套最简的指令集，然后动手画画微架构（microarchitecture）的大致数据通路（data path）；或者给定一个目标硬件平台，编写一个冷启动的引导程序；又或者不依赖任何库，从零开始手写一个简单的语法解析器。你会发现即使这些内容都是刚刚学完的但实现起来却很困难。</p>
<h2 id="特点">特点</h2>
<p>实际上我们在平时的学习和工作当中已经积累了一定的系统知识，只是它们是松散的或者不完整的，我希望能通过一系列文章，把这些知识有序地连接起来，从而成为你真正掌握的知识和技术。这系列文章有如下特点：</p>
<ul>
<li>
<p>不再是 “先讲原理然后做项目”，而是从探索和尝试入手，在实践和试错过程中再穿插原理（有时我还会穿插一些小典故）。而且跟很多实践型教程不一样，这系列不单单讲 <strong>如何做</strong>，还会讲解 <strong>为什么要这样做</strong>。很多实践型教程往往忽视了第二点，它们一般是哗啦啦地把每个操作步骤、包括屏幕截图和输入的每个参数等罗列出来，或者给你看一段很长配上旁白的操作过程视频，你必须严格跟着指引一步一步走才能最后成功。虽然跟着这些教程你也能做出 “作品”，不过对其中的缘由你肯定非常模糊。而且这些操作指引对环境和工具非常依赖，常常因为软硬件环境的变化或者工具的版本的更新，导致其中某些步骤有细微变化而跟教程不一致，最后无法成功。</p>
</li>
<li>
<p>不再分学科，而是根据系统的构建过程以及我们能理解的程度，把整个系列切分为多个小阶段，每个小阶都会同时涉及多个学科的知识。</p>
</li>
<li>
<p><strong>不需要任何专门的软件和硬件</strong>，很多专业的系统技术教程或者培训需要各种高大上的昂贵的专业软件和硬件，而这个系列只使用几个通用的开源免费的软件，和几个最广泛使用的最廉价的不超过一两百元的必要硬件模块，即可以完成到最后一章。（当然这系列的文章是免费的，文章当中也不会有任何广告或者推广链接 😄）。除了节省金钱，最重要的是这个系列不是为了让你成为某个软件或者硬件的操作工和使用者，而是让你自己创造工具构建系统。</p>
</li>
<li>
<p><strong>不需要任何专门的 IDE、SDK 或者库</strong>，全部从零开始构建。开始阶段只需几个通用的开源免费的编译器和工具，后面则会使用自己的工具。因为连工具都是自己构建的，因此可以彻底弄明白每一个技术细节而不会留有死角。</p>
</li>
<li>
<p>不是科普，不是走马观花式的观摩，而是真正深入地对计算机系统的完整实践。通过这一系列文章，你会对系统有正确的认识和理解，可以不被那些流传广泛而实则错误的各种时髦 “知识” 所迷惑。</p>
</li>
</ul>
<p>这一系列文章会以 RISC-V 作为学习和实现的目标架构，之所以选择 RISC-V 原因有：</p>
<ul>
<li>它的指令集相对比较简单，这使得我们自己动手实现 &ldquo;最小的能工作的&rdquo; 编译器及处理器成为可能；</li>
<li>有大量相关的开源免费的工具和文档，可以享用现有的工具来检查和验证我们的 &ldquo;作品&rdquo; 是否正确，这对摸索和学习过程非常重要；</li>
<li>最后如果我们做出了产品，也无需顾虑授权问题。</li>
</ul>
<h2 id="内容概况">内容概况</h2>
<p>无可否认系统技术的内容非常之多，它是几十年以来成千上万个全球最顶尖工程师的总结和积累，无论是广度还是深度都几乎逼近人脑的极限，甚至可以说它是远超越我们当前时代的一群人的作品。河马蜀黍知道无法简单地通过几篇文章就能讲完，所以准备了四个系列（series），每个系列分为若干部（part），每部含若干篇文章（chapter）。好吧，一共也就百来篇长文。用一句话描述这一系列文章的主要内容就是：<strong>学习现有的工具和系统，制作自己的工具，打造新的系统</strong>。你可能已经阅读过类似 “从零开始构建系统” 的书籍或文章，不过当前这个系列不但要构建系统，还会制作构建系统的工具，相信仍会让你感到耳目一新 😁。</p>
<p><img src="images/content.zh.png" alt="content"></p>
<p>虽然内容非常多，不过你不用担心难度过高而无法完成，因为每一个部分虽然名堂很大，但都是仅实现 &ldquo;刚好能用&rdquo; 的程度即止。最主要的是，系统技术的每一个小环节只要单独拿出来分析和实践都会出乎意料地简单，所以只需一步步跟着来，就不会发生在中途就被卡住的情况。当然我也会在 “简陋” 和 “实用” 之间平衡，让每一个 “作品” 都有实用价值。</p>
<blockquote>
<p>有时并不是系统技术本身真的很难，而是你遇到了糟糕的教材，或者没有遇到好老师。我发现编写优秀的经典的教材虽然不少，而且也很容易获得，只是往往会被巨量而劣质的信息所掩盖。选择对的教材很重要。</p>
</blockquote>
<p>现代主流的系统技术都有沉重的历史包袱，比如 GCC 已有三十多年的历史，Linux 内核也持续开发三十年，对于新手来说，无论是阅读理解、修改、扩充都非常困难，而且很多新观念无法整合。而我们的系统因为是从零开始，完全没有包袱，所以实现起来相对会简单轻松，有些顽固问题也可以从根本上解决；新理念（严格来说并不是新的，只是鲜有人知而已）也能无所顾忌地加入，比如：</p>
<ul>
<li>一门语言可以同时用于硬件开发、底层开发、应用开发和前端开发；</li>
<li>一门阅读友好的汇编语言；</li>
<li>一门函数型的脚本语言，既可作为 Shell 脚本，也可作为链接脚本；</li>
<li>一个使用微内核的系统，方便开发、调试、安装和发布（驱动程序也能像普通程序一样轻松开发），系统更新无需重启且可回滚；</li>
<li>基于能力（capability）而不是 <em>用户和组</em> 的系统安全模型；</li>
<li>数据结构化的 Shell；</li>
</ul>
<p>当然还有很多特性，在具体章节里会再详细列举。</p>
<h2 id="点赞转发打赏">点赞、转发、打赏</h2>
<p>虽然这系列文章的大部分内容我都已经实践过，不过我发现要把它们从头到尾讲解起来相当有挑战性：庞大而交叉的内容如何组织，如何挑选实践的内容，如何做到篇章之间的自然过渡和衔接，如何确保知识的准确，如何让读者看得轻松有趣等等，单单第一个系列的前 8 篇文章，经过反复琢磨和修改，前后居然花了四个多月的时间。我不知道还要多少时间才能把最后一章写完 😵‍💫。</p>
<p>而另一方面，虽然从宏观上来说系统技术承载着科学技术的传承和创新等重任，也是现代工业的基础，但对于个人来说，却很 &ldquo;现实地&rdquo; 没有多少用处（💰），毕竟几乎所有企业都从事应用层面的开发，系统技术无论是对普通人还是对开发人员都太过遥远了。</p>
<p>虽然我会努力地写好每一篇文章，但显然，阅读的人肯定是寥寥可数的，这其中又只有极其少数人才会感兴趣。因此，如果你碰巧看到这一系列文章，如果觉得有收获，请毫不犹豫地打赏我吧！你的一瓶可乐一杯咖啡的打赏就是我下一篇文章的写作动力啦 😄。</p>
<p>最后，虽然系统技术 &ldquo;几乎没用&rdquo;，但它却能可以很好地满足你的 “好奇、探索，创造” 原始天性。试想一下，还有什么比 “独自一人徒手征服人类史上最复杂的机器” 更酷的事情呢？！当你完成最后一章时，相信会看到一个不同的世界。点击 <a href="../2022-11-01-building-a-modern-computer-system-from-scratch-index">文章目录</a> 开始异世界之旅吧！</p>


<div>
    <img src="/images/subscribe-and-donate.zh.png" class="block-image image-480px"/>
</div>



</article>


<section class="post-nav">
    <ul>
        <li>
        
        </li>
        <li>
        
            <a href="https://hemashushu.github.io/zh/posts/2022-11-01-building-a-modern-computer-system-from-scratch-index/">从零开始一步一步制作自己的工具、构建现代计算机系统 - 目录 <i class="fa fa-chevron-circle-right"></i> </a>
        
        </li>
    </ul>
</section>
  
    
    
  





</main>
    <footer>
        <ul>
            <li>
                <h6>Copyright © 2022 - Hippospark | 
                    <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh"><img alt="cc by-nc-nd" class="license" src="/images/cc-by-nc-nd.png" /></a> |
                    Rendered by <a href="https://gohugo.io" title="Hugo">Hugo</a> |
                    Theme <a href="https://github.com/funkydan2/hugo-kiera" title="Kiera">Kiera</a> |
                    <a href="https://hemashushu.github.io/index.xml">Subscribe </a></h6>
            </li>
            
            
        </ul>
        
    </footer>
</div>
<script src="/js/scripts.js"></script>


</body>

</html>

